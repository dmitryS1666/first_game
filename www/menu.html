<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Egg Catcher Game</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:700" rel="stylesheet">
</head>
<body id="main">
<div id="headerMenu">
    <button id="homeButton" class="homeButton">
        <img src="../res/home_button.png">
    </button>
    <button id="settingButton" class="settingButton">
        <img src="../res/setting_button.png">
    </button>
</div>
<div class="levels">
    <ul>
        <li>
            <img src="../res/levels/bonus.png">
        </li>
        <li data-number="3">
            <img src="../res/levels/third.png">
        </li>
        <li data-number="2">
            <img src="../res/levels/second.png">
        </li>
        <li data-number="1">
            <img src="../res/levels/first.png">
        </li>
    </ul>
</div>

<div id="miniRocket">
    <img class="miniRocket" src="../res/levels/mini_rocket.png">
</div>

<div id="goldImage" class="goldMenu">
    <img class="flash" src="../res/big_flash.png">
    <img class="gold" src="../res/gold_price.png">
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const homeButton = document.getElementById('homeButton');
        const settingButton = document.getElementById('settingButton');
        const miniRocket = document.getElementById('miniRocket');
        const listItems = document.querySelectorAll('.levels li');
        let isInitialLoad = true; // Флаг для проверки первоначальной загрузки

        function moveRocketToItem(item) {
            const rect = item.getBoundingClientRect();
            const rocketRect = miniRocket.getBoundingClientRect();

            const offsetX = 0;
            const offsetY = rect.top + (rect.height / 2) - (rocketRect.height / 2);

            miniRocket.style.transform = `translate(${offsetX}px, ${offsetY}px)`;

            // Удаляем класс active у всех элементов
            listItems.forEach(li => li.classList.remove('active'));
            // Добавляем класс active только к выбранному элементу
            item.classList.add('active');

            // Если это не первоначальная загрузка, выполняем редирект
            if (!isInitialLoad) {
                setTimeout(() => {
                    const levelNumber = item.getAttribute('data-number');
                    // window.location.href = `index.html?level=${levelNumber}`;
                }, 2000); // 2000 миллисекунд = 2 секунды
            }
        }

        function addShineClass(event) {
            event.currentTarget.classList.add('shinePlanet');
        }

        function removeShineClass(event) {
            event.currentTarget.classList.remove('shinePlanet');
        }

        listItems.forEach(item => {
            // События для сенсорных экранов
            item.addEventListener('touchstart', addShineClass);
            item.addEventListener('touchend', removeShineClass);

            // События для настольных браузеров
            item.addEventListener('mouseover', addShineClass);
            item.addEventListener('mouseout', removeShineClass);

            item.addEventListener('click', () => {
                moveRocketToItem(item);
            });
        });

        miniRocket.style.top = '0';

        // Установить начальное положение ракеты на последнем элементе, но не выполнять редирект
        moveRocketToItem(listItems[listItems.length - 1]);
        isInitialLoad = false; // Установить флаг в false после инициализации
    });
</script>
</body>
</html>
